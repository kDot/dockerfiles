version: "3.5"
services:
  mongo:
    image: webhippie/mongodb
    container_name: unifi-db
    restart: unless-stopped
    volumes:
      - /data/unifi-db:/data/db
  controller:
    image: jacobalberty/unifi:arm32v7
    container_name: unifi 
    depends_on:
      - mongo
    restart: unless-stopped
    environment:
      - RUNAS_UID0=false
      - UNIFI_UID=1000
      - UNIFI_GID=1000
      - DB_URI=mongodb://unifi-db/unifi
      - STATDB_URI=mongodb://unifi-db/unifi_stat
      - DB_NAME=unifi
    volumes:
      - /data/unifi:/unifi
    ports:
     - "8443:8443"
     - "3478:3478/udp"
     - "10001:10001/udp"
     - "8080:8080"
